<!DOCTYPE html>
<html>
	<head>
		<title><%= title %></title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<style type="text/css">
		body {
			font-family: Verdana, sans-serif;
			font-size: 12px;
			margin: 0;
			padding: 0;
		}

		div#header {
			margin: 10px 10px 0 10px;
			padding: 0 0 10px 0;
			border-bottom: 1px solid #000;
		}

		div#content { margin: 10px; }
		div#content div.log {
			padding-top: 10px;
			font-family: "Courier New", Courier, monospace;
			font-size: 12px;
		}

		div.log ul {
			padding: 0;
			margin: 0;
			list-style-type: none;
		}

		div#footer {
			margin: 0 10px 10px 10px;
			padding: 10px 0 0 0;
			border-top: 1px solid #000;
		}
		</style>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		$(document).ready(function()
		{
			var jpRegex = new RegExp("^(.*) [^ ]+ \([^@]+@[^ ]+\) has (joined|left|quit) (#(.*)$|\((.*)\))");

			$('ul#log-lines li').each(function(index)
			{
				if (jpRegex.test($(this).text()))
    				$(this).hide();
    			// hide joins/parts/quits by default
			});

			$('a#toggle-jp').click(function()
			{
				if ($(this).text() == 'Show joins/parts')
				{
					var hide = false;
					$(this).text('Hide joins/parts');
				}
				else
				{
					var hide = true;
					$(this).text('Show joins/parts');
				}

				$('ul#log-lines li').each(function(index)
				{
					var text = $(this).text();
	    			if (jpRegex.test($(this).text()))
	    			{
	    				if (hide)
	    					$(this).hide();
	    				else
	    					$(this).show();
	    			}
	    			// hide joins/parts/quits
				});

				return false;
			});
		});
		</script>
	</head>
	<body>
		<div id="header">
			<%= title %> &middot; <a href="#" id="toggle-jp">Show joins/parts</a>
		</div>
		<div id="content">
			<div class="breadcrumb"><%= logData.breadCrumb %></div>
			<div class="log">
				<ul id="log-lines">
				<% for(var line in log): %>
					<%= log[line] %>
				<% endfor; %>
				</ul>
			</div>
		</div>
		<div id="footer">
			Ricki Hastings 2011 &copy; &middot; <a href="http://ircnode.org">ircnode.org</a>
		</div>
	</body>
</html>